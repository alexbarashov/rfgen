# –ü—Ä–æ–±–ª–µ–º–∞: –†–µ–∑–∫–∏–µ –∫—Ä–∞—è –∏–º–ø—É–ª—å—Å–∞ AIS (–Ω–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü)

**–î–∞—Ç–∞:** 2025-10-22  
**–°—Ç–∞—Ç—É—Å:** üî¥ –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ AIS —Å–∏–≥–Ω–∞–ª–æ–≤ –∏–º–ø—É–ª—å—Å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è **—Ä–µ–∑–∫–æ** (–±–µ–∑ –ø–ª–∞–≤–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤), —á—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å:
- –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–µ –≤—ã–±—Ä–æ—Å—ã (spectral splatter)
- –ü–æ–º–µ—Ö–∏ –Ω–∞ —Å–æ—Å–µ–¥–Ω–∏—Ö —á–∞—Å—Ç–æ—Ç–∞—Ö
- –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–µ–º–æ–¥—É–ª—è—Ü–∏–µ–π –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –∫–∞–¥—Ä–∞

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å PSK-406

### ‚úÖ PSK-406 (–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

**–§–∞–π–ª:** `rfgen/standards/psk406.py`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∏–≥–Ω–∞–ª–∞:**
```
[–®—É–º] ‚Üí [–ù–µ—Å—É—â–∞—è] ‚Üí [–°–æ–æ–±—â–µ–Ω–∏–µ] ‚Üí [–®—É–º]
 25ms     160ms        ~0.5s        25ms
```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

1. **Pre-silence —Å —à—É–º–æ–º** (—Å—Ç—Ä–æ–∫–∞ 112):
```python
pre = _gen_noise(pre_N, noise_amp, rng)  # –ì–∞—É—Å—Å–æ–≤ —à—É–º -60 dBFS
```

2. **–ù–µ—Å—É—â–∞—è –ø–µ—Ä–µ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º** (—Å—Ç—Ä–æ–∫–∞ 115):
```python
carrier = np.ones(carr_N, dtype=np.complex64)  # 160 –º—Å –Ω–µ—Å—É—â–µ–π
```

3. **–ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —Ñ–∞–∑—ã** (—Å—Ç—Ä–æ–∫–∏ 131-144):
```python
def _seg(prev_phase, target_phase, segN, frontN):
    ramp = _phase_ramp(prev_phase, target_phase, rampN)  # –õ–∏–Ω–µ–π–Ω—ã–π —Ä–∞–º–ø
    # –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Ñ–∞–∑—ã –∫ —Ü–µ–ª–µ–≤–æ–π
```

4. **Post-silence —Å —à—É–º–æ–º** (—Å—Ç—Ä–æ–∫–∞ 164):
```python
post = _gen_noise(post_N, noise_amp, rng)  # –ì–∞—É—Å—Å–æ–≤ —à—É–º -60 dBFS
```

**–§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —à—É–º–∞:**
```python
def _gen_noise(n, amp_lin, rng):
    """Complex white Gaussian noise, RMS ~ amp_lin/‚àö2 per I/Q"""
    noise_i = rng.normal(0.0, amp_lin / np.sqrt(2.0), size=n)
    noise_q = rng.normal(0.0, amp_lin / np.sqrt(2.0), size=n)
    return (noise_i + 1j * noise_q)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**
- `pre_silence_ms = 25.0` –º—Å (—Å —à—É–º–æ–º!)
- `post_silence_ms = 25.0` –º—Å (—Å —à—É–º–æ–º!)
- `carrier_sec = 0.16` —Å–µ–∫—É–Ω–¥—ã
- `noise_dbfs = -60.0` dBFS
- `front_samples = 75` (–ø–ª–∞–≤–Ω—ã–µ —Ñ–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã)

### ‚ùå AIS (–ø—Ä–æ–±–ª–µ–º–∞)

**–§–∞–π–ª:** `rfgen/core/wave_engine.py`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∏–≥–Ω–∞–ª–∞:**
```
[–ù—É–ª–∏] ‚Üí [GMSK —Å–æ–æ–±—â–µ–Ω–∏–µ] ‚Üí [–ù—É–ª–∏]
 20ms         ~27ms           20ms
```

**–ü—Ä–æ–±–ª–µ–º—ã:**

1. **–¢–æ–ª—å–∫–æ –Ω—É–ª–∏ –¥–æ/–ø–æ—Å–ª–µ** (—Å—Ç—Ä–æ–∫–∏ 486-495):
```python
pre_s = 0.02   # 20 –º—Å
post_s = 0.02  # 20 –º—Å

if pre_samples > 0:
    iq = np.concatenate([np.zeros(pre_samples), iq])  # –ü—Ä–æ—Å—Ç–æ –ù–£–õ–ò!
if post_samples > 0:
    iq = np.concatenate([iq, np.zeros(post_samples)])  # –ü—Ä–æ—Å—Ç–æ –ù–£–õ–ò!
```

2. **–ù–µ—Ç –Ω–µ—Å—É—â–µ–π –ø–µ—Ä–µ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º**
   - –°–∏–≥–Ω–∞–ª —Å—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø—Ä–µ–∞–º–±—É–ª—ã GMSK

3. **–†–µ–∑–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –∞–º–ø–ª–∏—Ç—É–¥—ã**
   - –û—Ç 0 —Å—Ä–∞–∑—É –∫ –ø–æ–ª–Ω–æ–π –∞–º–ø–ª–∏—Ç—É–¥–µ GMSK
   - –û—Ç –ø–æ–ª–Ω–æ–π –∞–º–ø–ª–∏—Ç—É–¥—ã —Å—Ä–∞–∑—É –∫ 0

4. **–ù–µ—Ç —Ñ–æ–Ω–æ–≤–æ–≥–æ —à—É–º–∞**
   - –ê–±—Å–æ–ª—é—Ç–Ω–∞—è —Ç–∏—à–∏–Ω–∞ (0+0j) ‚Üí –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞?

**–°–ø–µ–∫—Ç—Ä —Å–∏–≥–Ω–∞–ª–∞:**
- –†–µ–∑–∫–∏–π —Å–∫–∞—á–æ–∫ –∞–º–ø–ª–∏—Ç—É–¥—ã ‚Üí –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ —à–∏—Ä–æ–∫–∏–π —Å–ø–µ–∫—Ç—Ä –≤ —Ç–µ–æ—Ä–∏–∏
- –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ: spectral splatter –Ω–∞ ¬±50-100 –∫–ì—Ü –æ—Ç –Ω–µ—Å—É—â–µ–π
- –ú–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∞—Ç—å –º–∞—Å–∫—É –∏–∑–ª—É—á–µ–Ω–∏—è ITU-R M.1371

**–î–µ–º–æ–¥—É–ª—è—Ü–∏—è:**
- AGC (Automatic Gain Control) –ø—Ä–∏—ë–º–Ω–∏–∫–∞ –º–æ–∂–µ—Ç –Ω–µ —É—Å–ø–µ—Ç—å —Å—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å
- Clock recovery –º–æ–∂–µ—Ç –ø–æ—Ç–µ—Ä—è—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –Ω–∞ –∫—Ä–∞—è—Ö
- –ü–µ—Ä–≤—ã–µ/–ø–æ—Å–ª–µ–¥–Ω–∏–µ –±–∏—Ç—ã –º–æ–≥—É—Ç –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –æ—à–∏–±–∫–∞–º–∏

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ AIS?

‚úÖ GMSK –º–æ–¥—É–ª—è—Ü–∏—è —Å–∞–º–∞ –ø–æ —Å–µ–±–µ –∏–º–µ–µ—Ç –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —Ñ–∞–∑—ã (BT=0.4)  
‚úÖ –ü—Ä–µ–∞–º–±—É–ª–∞ 010101... –ø–æ–º–æ–≥–∞–µ—Ç clock recovery  
‚úÖ Guard time (24 –±–∏—Ç–∞ –Ω—É–ª–µ–π) –µ—Å—Ç—å –≤–Ω—É—Ç—Ä–∏ –∫–∞–¥—Ä–∞

### –ß—Ç–æ –ù–ï –¥–µ–ª–∞–µ—Ç—Å—è?

‚ùå –ù–µ—Ç –ø–ª–∞–≤–Ω–æ–≥–æ –Ω–∞—Ä–∞—Å—Ç–∞–Ω–∏—è/—Å–ø–∞–¥–∞ –æ–≥–∏–±–∞—é—â–µ–π (envelope ramp)  
‚ùå –ù–µ—Ç –Ω–µ—Å—É—â–µ–π –ø–µ—Ä–µ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –¥–ª—è AGC –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  
‚ùå –ù–µ—Ç —Ñ–æ–Ω–æ–≤–æ–≥–æ —à—É–º–∞ (–º–æ–∂–µ—Ç –ø–æ–º–æ—á—å AGC)

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | PSK-406 | AIS | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|---------|-----|-------------|
| Pre-silence | 25 –º—Å —Å —à—É–º–æ–º | 20 –º—Å –Ω—É–ª–∏ | ‚ùå –ù–µ—Ç —à—É–º–∞ |
| –ù–µ—Å—É—â–∞—è | 160 –º—Å | –ù–µ—Ç | ‚ùå –ù–µ—Ç —Ä–∞–∑–æ–≥—Ä–µ–≤–∞ AGC |
| –§–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã | –ü–ª–∞–≤–Ω—ã–µ (75 samples) | GMSK (–ø–ª–∞–≤–Ω—ã–µ) | ‚úÖ OK |
| –û–≥–∏–±–∞—é—â–∞—è | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ | ‚ö†Ô∏è –ù–µ—Ç ramp |
| Post-silence | 25 –º—Å —Å —à—É–º–æ–º | 20 –º—Å –Ω—É–ª–∏ | ‚ùå –ù–µ—Ç —à—É–º–∞ |
| –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è | 0.999 peak | 0.8 peak | ‚úÖ OK |

## –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–æ–±–∞–≤–∏—Ç—å Envelope Ramp (–º–∏–Ω–∏–º—É–º)

–î–æ–±–∞–≤–∏—Ç—å –ø–ª–∞–≤–Ω–æ–µ –Ω–∞—Ä–∞—Å—Ç–∞–Ω–∏–µ/—Å–ø–∞–¥ –æ–≥–∏–±–∞—é—â–µ–π –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ –∫–∞–¥—Ä–∞:

```python
# Pseudo-code
ramp_samples = int(fs * 0.001)  # 1 –º—Å ramp
ramp_up = np.linspace(0, 1, ramp_samples)
ramp_down = np.linspace(1, 0, ramp_samples)

iq[:ramp_samples] *= ramp_up
iq[-ramp_samples:] *= ramp_down
```

**–ü–ª—é—Å—ã:** –ü—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è  
**–ú–∏–Ω—É—Å—ã:** –ú–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –ø—Ä–µ–∞–º–±—É–ª—É

### –í–∞—Ä–∏–∞–Ω—Ç 2: –î–æ–±–∞–≤–∏—Ç—å —à—É–º –∏ –Ω–µ—Å—É—â—É—é (–∫–∞–∫ PSK-406)

```python
# –î–æ–±–∞–≤–∏—Ç—å —à—É–º –¥–æ/–ø–æ—Å–ª–µ
noise_amp = 10**(-60/20)  # -60 dBFS
pre_noise = _gen_noise(pre_samples, noise_amp)
post_noise = _gen_noise(post_samples, noise_amp)

# –î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å—É—â—É—é –ø–µ—Ä–µ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º
carrier_samples = int(fs * 0.05)  # 50 –º—Å
carrier = np.ones(carrier_samples, dtype=np.complex64)

iq = np.concatenate([pre_noise, carrier, iq, post_noise])
```

**–ü–ª—é—Å—ã:** –ü–æ–ª–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Å–∏–≥–Ω–∞–ª  
**–ú–∏–Ω—É—Å—ã:** –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–ª–∏–Ω—É –∫–∞–¥—Ä–∞ –Ω–∞ ~75 –º—Å

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥

- –®—É–º –¥–æ/–ø–æ—Å–ª–µ (–∫–∞–∫ PSK-406)
- –ö–æ—Ä–æ—Ç–∫–∞—è –Ω–µ—Å—É—â–∞—è 20-30 –º—Å (–º–µ–Ω—å—à–µ —á–µ–º PSK-406)
- –ü–ª–∞–≤–Ω—ã–π ramp –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö

**–ü–ª—é—Å—ã:** –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∫–∞—á–µ—Å—Ç–≤–æ–º –∏ –¥–ª–∏–Ω–æ–π –∫–∞–¥—Ä–∞  
**–ú–∏–Ω—É—Å—ã:** –¢—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –î–æ–±–∞–≤–∏—Ç—å —à—É–º –¥–æ/–ø–æ—Å–ª–µ

–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç–∏:
- `pre_silence`: –ì–∞—É—Å—Å–æ–≤ —à—É–º -60 dBFS, 20-25 –º—Å
- `post_silence`: –ì–∞—É—Å—Å–æ–≤ —à—É–º -60 dBFS, 20-25 –º—Å

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –î–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä–æ—Ç–∫—É—é –Ω–µ—Å—É—â—É—é

–î–ª—è –ø–æ–º–æ—â–∏ AGC –ø—Ä–∏—ë–º–Ω–∏–∫–∞:
- `carrier`: 30-50 –º—Å –Ω–µ—Å—É—â–µ–π –ø–µ—Ä–µ–¥ –ø—Ä–µ–∞–º–±—É–ª–æ–π
- –ê–º–ø–ª–∏—Ç—É–¥–∞ = —Å—Ä–µ–¥–Ω—è—è –∞–º–ø–ª–∏—Ç—É–¥–∞ GMSK —Å–∏–≥–Ω–∞–ª–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: Envelope ramp (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø–æ–∫–∞–∂—É—Ç spectral splatter:
- Ramp up: 0.5-1 –º—Å –≤ –Ω–∞—á–∞–ª–µ –∫–∞–¥—Ä–∞
- Ramp down: 0.5-1 –º—Å –≤ –∫–æ–Ω—Ü–µ –∫–∞–¥—Ä–∞

## –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ AIS –¥–µ–º–æ–¥—É–ª—è—Ç–æ—Ä–∞–º–∏:
- TesterPi –¥–µ–∫–æ–¥–µ—Ä
- –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ AIS –ø—Ä–∏—ë–º–Ω–∏–∫–∏
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ CRC-X25 –æ—Å—Ç–∞—ë—Ç—Å—è True
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ best_eye –Ω–µ —É—Ö—É–¥—à–∞–µ—Ç—Å—è

## –°—Å—ã–ª–∫–∏

- ITU-R M.1371-5: Technical characteristics for AIS
- COSPAS-SARSAT Beacon Specification (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å PSK-406)
- `rfgen/standards/psk406.py` - —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- `rfgen/core/wave_engine.py` - —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è AIS

## –°—Ç–∞—Ç—É—Å

- [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ –∏–∑–º–µ—Ä–µ–Ω–∏–µ —Å–ø–µ–∫—Ç—Ä–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–∏–≥–Ω–∞–ª–∞
- [ ] –°—Ä–∞–≤–Ω–∏—Ç—å —Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º AIS –æ—Ç —Å—É–¥–æ–≤–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç —Å —à—É–º–æ–º
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å TesterPi
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç —Å –Ω–µ—Å—É—â–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

**–ê–≤—Ç–æ—Ä:** Claude Code  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-22
