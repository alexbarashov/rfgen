# rfgen — Универсальный генератор радиосигналов

## Обзор

**rfgen** — кроссплатформенный генератор радиосигналов для тестирования и разработки. Генерирует непрерывные RF‑сигналы для различных стандартов и протоколов с использованием SDR‑оборудования (HackRF, PlutoSDR) или выводом в файл для офлайн‑анализа.

**ПРЕДУПРЕЖДЕНИЕ:** Инструмент генерирует радиочастотные сигналы. Несанкционированная передача на многих частотах незаконна и может нарушать местные нормативы. Используйте только в экранированной тестовой среде или при наличии соответствующих лицензий.

## Страницы интерфейса

Приложение организовано по тематическим вкладкам:

### 1. Basic (Общий генератор сигналов)

**Назначение:** Генерация непрерывных тестовых сигналов без протокольного кодирования.

**Возможности:**
- Модуляции: Carrier/AM/FM/PM
- Шаблоны: Tone, Sweep, Noise, FF00, F0F0, 3333, 5555
- Настраиваемые частота, усиление, IF‑сдвиг
- Режим «Loop» для непрерывной передачи

**Сценарии использования:**
- Тестирование SDR‑приёмников
- Отладка трактов сигналов
- Генерация несущей/тона
- Передача битовых шаблонов

### 2. AIS (Automatic Identification System)

**Назначение:** Генерация AIS‑сигналов для морского слежения за судами.

**Возможности:**
- Канал A (161.975 МГц) / Канал B (162.025 МГц)
- GMSK‑модуляция (9600 бод, BT≈0.4)
- Настройка MMSI и полезной нагрузки
- Тестовые паттерны для непрерывной передачи

**Частоты:** 161.975 / 162.025 МГц  
**Юридическое уведомление:** AIS — система морской безопасности. Несанкционированная передача может мешать навигации и является незаконной.

### 3. 406 МГц (COSPAS‑SARSAT Beacon)

**Назначение:** Генерация сигналов аварийных маяков 406 МГц для тестирования SAR‑оборудования.

**Возможности:**
- BPSK‑модуляция
- Настройка идентификатора маяка
- FEC и интерливинг
- Тестовый режим с паттернами

**Частоты:** 406.025 / 406.028 / 406.037 МГц  
**Юридическое уведомление:** 406 МГц зарезервирована для аварийных маяков. Использовать ТОЛЬКО в экранированной среде. Несанкционированная передача — серьёзное правонарушение и может инициировать операции поиска и спасения.

**Бэкенд по умолчанию:** FileOut (безопасный режим) — рекомендуется только офлайн‑анализ.

### 4. DSC VHF (Цифровой избирательный вызов — УКВ)

**Назначение:** Генерация DSC‑сигналов УКВ для морского бедствия и вызовов.

**Возможности:**
- Канал 70 (156.525 МГц)
- Вызовы Distress, Urgency, Safety, Routine
- Адресация MMSI
- FSK‑модуляция (сдвиг 170 Гц, 100 бод)

**Частота:** 156.525 МГц  
**Юридическое уведомление:** Канал 70 DSC зарезервирован для связи по бедствию и безопасности. Несанкционированная передача незаконна.

### 5. DSC HF (Цифровой избирательный вызов — КВ)

**Назначение:** Генерация DSC‑сигналов КВ для дальней морской связи.

**Возможности:**
- Несколько КВ‑частот (2, 4, 6, 8, 12, 16 МГц)
- Функциональность, аналогичная DSC VHF
- Соответствие ITU‑R M.541

**Частоты:** 2187.5, 4207.5, 6312, 8414.5, 12577, 16804.5 кГц  
**Юридическое уведомление:** КВ‑частоты DSC предназначены для морской связи по вопросам бедствия и безопасности. Несанкционированное использование незаконно.

### 6. NAVTEX (Navigational Telex)

**Назначение:** Генерация NAVTEX‑сигналов для морских навигационных и метеопредупреждений.

**Возможности:**
- 518 кГц (международная) / 490 кГц (национальная) / 4209.5 кГц (КВ)
- Кодирование SITOR‑B
- FSK‑модуляция (сдвиг 170 Гц, 100 бод)
- Ввод текстового сообщения или импорт из файла

**Частоты:** 490, 518 кГц, 4209.5 кГц  
**Юридическое уведомление:** Частоты NAVTEX используются для официальных оповещений по безопасности мореплавания. Несанкционированная передача незаконна.

### 7. 121.5 МГц (Аварийный маяк авиации)

**Назначение:** Генерация сигналов 121.5 МГц для тестирования авиационных SAR‑систем.

**Возможности:**
- Пилообразный/периодический свип‑тон (300–1600 Гц) или постоянный тон
- AM‑модуляция
- Настраиваемые скорость и глубина свипа

**Частота:** 121.5 МГц  
**Юридическое уведомление:** 121.5 МГц — международная авиационная аварийная частота. Использовать ТОЛЬКО в экранированной среде. Несанкционированная передача может инициировать аварийные реагирования и является серьёзным правонарушением.

### 8. Profiles (Менеджер профилей)

**Назначение:** Управление конфигурационными профилями сигналов.

**Возможности:**
- Список всех профилей из `rfgen/profiles/`
- Операции Load, Duplicate, Rename, Delete
- Импорт/Экспорт профилей
- Предпросмотр JSON с валидацией
- Миграция из устаревших местоположений профилей

**Сценарии использования:**
- Сохранение часто используемых конфигураций
- Обмен конфигурациями между системами
- Быстрый вызов типовых сценариев тестирования

### 9. Logs (Просмотр логов и диагностика)

**Назначение:** Просмотр логов и системной диагностики.

**Возможности:**
- Просмотр логов из `rfgen/logs/`
- Системная диагностика (версия Python, утилиты HackRF, запущенные процессы)
- Режим автообновления/«tail»
- Завершение всех процессов hackrf_transfer
- Очистка логов с подтверждением
- Открытие папки с логами в Проводнике

**Сценарии использования:**
- Отладка проблем передачи
- Мониторинг процессов HackRF
- Проверка конфигурации системы

## Бэкенды

### HackRF

Использует утилиту `hackrf_transfer` в режиме петли (`-R`) для непрерывной передачи.

**Параметры:**
- Центральная частота (Гц)
- Частота дискретизации (Гц)
- Усиление TX (0–47 дБ)
- Включение/выключение PA

### FileOut

Запись IQ‑семплов в файлы для офлайн‑анализа.

**Форматы:**
- `.sc8` (int8, переплетённые I/Q) — по умолчанию
- `.cf32` (float32 complex) — опционально

## Структура проекта

```
rfgen/
  ui_qt/          # Qt‑приложение (PySide6)
  core/           # Ядро генерации сигналов
  standards/      # Реализации протоколов
  backends/       # Аппаратные бэкенды
  utils/          # Утилиты (пути, I/O профилей, миграция)
  profiles/       # JSON‑профили (в .gitignore)
  out/            # Выходные файлы IQ (в .gitignore)
  logs/           # Файлы логов (в .gitignore)
```

## Профили

Профили — это JSON‑файлы в `rfgen/profiles/`:

```json
{
  "schema": 1,
  "name": "test_signal",
  "standard": "basic",
  "modulation": {
    "type": "FM",
    "deviation_hz": 5000
  },
  "pattern": {
    "type": "Tone",
    "tone_hz": 1000
  },
  "schedule": {
    "mode": "loop",
    "duration_s": 1.0
  },
  "device": {
    "backend": "hackrf",
    "fs_tx": 2000000,
    "tx_gain_db": 30,
    "target_hz": 162025000,
    "if_offset_hz": -25000
  }
}
```

## Правовые и безопасностные предупреждения

**ВАЖНО:** Многие частоты, генерируемые этим инструментом, юридически ограничены:

- **Морские частоты (AIS, DSC, NAVTEX):** Зарезервированы для безопасности судоходства и навигации. Несанкционированная передача может мешать морским операциям и является незаконной.

- **Аварийные частоты (406 МГц, 121.5 МГц):** Зарезервированы для аварийных маяков. Несанкционированная передача может инициировать операции поиска и спасения, приводить к напрасному расходованию ресурсов и является серьёзным уголовным правонарушением.

- **Общий радиочастотный спектр:** Большинство диапазонов требует лицензирования вашим национальным регулятором связи.

**Законное использование:**
- Экранированная тестовая среда (безэховая камера, клетка Фарадея, RF‑герметичный бокс)
- Подключение через аттенюатор/нагрузку‑эквивалент
- Любительские диапазоны при наличии соответствующей лицензии
- Бэкенд FileOut для офлайн‑анализа

**Перед передачей убедитесь, что:**
1. Частота легальна для использования в вашей юрисдикции
2. У вас есть соответствующие лицензии
3. Достаточная экранировка или ослабление обеспечены
4. Имеется гарантия отсутствия помех системам безопасности

**Нарушения могут привести к:**
- Уголовному преследованию
- Крупным штрафам
- Конфискации оборудования
- Помехам службам спасения (safety‑of‑life)

## Установка

### Требования
- Python 3.9+
- PySide6 (биндинги Qt6)
- numpy < 2.0
- Утилиты HackRF (для бэкенда HackRF)

### Настройка

```bash
# Установка зависимостей
pip install -r rfgen/requirements.txt

# Запуск приложения
python -m rfgen.ui_qt.app

# Или через удобный скрипт
app_rfgen.bat
```

## CLI‑интерфейс

Доступен и интерфейс командной строки:

```bash
python -m rfgen.cli.rfgen_cli --fs 2000000 --mod FM --dev 5000 --pattern Tone --tone 1000 --outdir out --name test_frame
```

## Поддержка

По вопросам и проблемам см. основной README проекта.

## Лицензия

См. файл LICENSE в корне репозитория.

---

**Помните:** с большой силой приходит большая ответственность. Используйте инструмент этично и законно.
